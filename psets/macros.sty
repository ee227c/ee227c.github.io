\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{url,ifthen}
\usepackage{enumitem}
\usepackage{srcltx}
\usepackage{multirow}
\usepackage[linesnumbered]{algorithm2e}

\usepackage{boxedminipage}
\usepackage[margin=1.1in]{geometry}
\usepackage{nicefrac}
\usepackage{xspace}
\usepackage{graphicx}
\usepackage{color}
\definecolor{DarkGreen}{rgb}{0.1,0.5,0.1}
\definecolor{DarkRed}{rgb}{0.5,0.1,0.1}
\definecolor{DarkBlue}{rgb}{0.1,0.1,0.5}
\definecolor{Gray}{rgb}{0.2,0.2,0.2}

% Code:
% Use listings package for code environments
\renewcommand{\ttdefault}{pcr}
\usepackage{listings}
\lstdefinestyle{mystyle}{
    commentstyle=\color{DarkBlue},
    keywordstyle=\color{DarkRed},
    numberstyle=\tiny\color{Gray},
    stringstyle=\color{DarkGreen},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=mystyle}

\usepackage[small]{caption}
\usepackage[pdftex]{hyperref}
\hypersetup{
    unicode=false,          % non-Latin characters in AcrobatÂ¿s bookmarks
    pdftoolbar=true,        % show Acrobat toolbar?
    pdfmenubar=true,        % show Acrobat menu?
    pdffitwindow=false,      % page fit to window when opened
    pdfnewwindow=true,      % links in new window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=DarkBlue,          % color of internal links
    citecolor=DarkGreen,        % color of links to bibliography
    filecolor=DarkRed,      % color of file links
    urlcolor=DarkBlue,          % color of external links
    pdftitle={EE227C: Convex Optimization and Approximation},
    pdfauthor={Moritz Hardt},
}


% 1 for working draft
% will show author notes
\def\draft{1}

\ifnum\draft=1 % show authors' note if draft
    \def\ShowAuthNotes{1}
\else
    \def\ShowAuthNotes{0}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Author's notes
\ifnum\ShowAuthNotes=1
\newcommand{\authnote}[2]{{ \footnotesize \bf{\color{DarkRed}[#1's Note:
{\color{DarkBlue}#2}]}}}
\else
\newcommand{\authnote}[2]{}
\fi

\newcommand{\mnote}[1]{{\authnote{Moritz} {#1}}}
\newcommand{\Mnote}[1]{{\authnote{Moritz} {#1}}}

% Theorems:
% Use these theorem environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{remark}[theorem]{Remark}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{observation}[theorem]{Observation}
\newtheorem{conjecture}[theorem]{Conjecture}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{question}{Question}[section]

\newtheorem{theorem*}{Theorem}
\newtheorem{proposition*}{Proposition}
\newtheorem{lemma*}{Lemma}
\newtheorem{definition*}{Definition}


% Macros for latex references, creates proper hyperlinks
\newcommand{\chapterlabel}[1]{\label{ch:#1}}
\newcommand{\chapterref}[1]{\hyperref[ch:#1]{Chapter~\ref{ch:#1}}}
\newcommand{\claimlabel}[1]{\label{claim:#1}}
\newcommand{\claimref}[1]{\hyperref[claim:#1]{Claim~\ref{claim:#1}}}
\newcommand{\corollarylabel}[1]{\label{cor:#1}}
\newcommand{\corollaryref}[1]{\hyperref[cor:#1]{Corollary~\ref{cor:#1}}}
\newcommand{\definitionlabel}[1]{\label{def:#1}}
\newcommand{\definitionref}[1]{\hyperref[def:#1]{Definition~\ref{def:#1}}}
\newcommand{\equationlabel}[1]{\label{eq:#1}}
\newcommand{\equationref}[1]{\hyperref[eq:#1]{Equation~\ref{eq:#1}}}
\newcommand{\factlabel}[1]{\label{fact:#1}}
\newcommand{\factref}[1]{\hyperref[fact:#1]{Fact~\ref{fact:#1}}}
\newcommand{\figurelabel}[1]{\label{fig:#1}}
\newcommand{\figureref}[1]{\hyperref[fig:#1]{Figure~\ref{fig:#1}}}
\newcommand{\tablelabel}[1]{\label{tab:#1}}
\newcommand{\tableref}[1]{\hyperref[tab:#1]{Table~\ref{tab:#1}}}
\newcommand{\itemlabel}[1]{\label{item:#1}}
\newcommand{\itemref}[1]{\hyperref[item:#1]{Item~(\ref{item:#1})}}
\newcommand{\lemmalabel}[1]{\label{lem:#1}}
\newcommand{\lemmaref}[1]{\hyperref[lem:#1]{Lemma~\ref{lem:#1}}}
\newcommand{\proplabel}[1]{\label{prop:#1}}
\newcommand{\propref}[1]{\hyperref[prop:#1]{Proposition~\ref{prop:#1}}}
\newcommand{\propositionlabel}[1]{\label{prop:#1}}
\newcommand{\propositionref}[1]{\hyperref[prop:#1]{Proposition~\ref{prop:#1}}}
\newcommand{\remarklabel}[1]{\label{rem:#1}}
\newcommand{\remarkref}[1]{\hyperref[rem:#1]{Remark~\ref{rem:#1}}}
\newcommand{\sectionlabel}[1]{\label{sec:#1}}
\newcommand{\sectionref}[1]{\hyperref[sec:#1]{Section~\ref{sec:#1}}}
\newcommand{\theoremlabel}[1]{\label{thm:#1}}
\newcommand{\theoremref}[1]{\hyperref[thm:#1]{Theorem~\ref{thm:#1}}}
\newcommand{\questionlabel}[1]{\label{thm:#1}}
\newcommand{\questionref}[1]{\hyperref[thm:#1]{Theorem~\ref{thm:#1}}}

% Fonts:
% Palatino for rm and math | Helvetica for ss | Courier for tt
\usepackage{microtype}
\usepackage{mathpazo} % math & rm
\linespread{1.05}        % Palatino needs more leading (space between lines)
\usepackage[scaled]{helvet} % ss
\usepackage{courier} % tt
\normalfont
\usepackage[T1]{fontenc}

% Expectation, Probability, Variance
\newcommand{\Esymb}{\mathbb{E}}
\newcommand{\Psymb}{\mathbb{P}}
\newcommand{\Vsymb}{\mathbb{V}}
\DeclareMathOperator*{\E}{\Esymb}
\DeclareMathOperator*{\Var}{\Vsymb}
\DeclareMathOperator*{\ProbOp}{\Psymb r}
\renewcommand{\Pr}{\ProbOp}
\newcommand{\prob}[1]{\Pr\big\{ #1 \big\}}
\newcommand{\Prob}[1]{\Pr\left\{ #1 \right\}}
\newcommand{\varprob}[1]{\Pr\big( #1 \big)}
\newcommand{\varProb}[1]{\Pr\left( #1 \right)}
\newcommand{\ex}[1]{\E\big[#1\big]}
\newcommand{\Ex}[1]{\E\left[#1\right]}
\newcommand{\varex}[1]{\E\paren{#1}}
\newcommand{\varEx}[1]{\E\Paren{#1}}

\newcommand{\widebar}[1]{\overline{#1}}
\renewcommand{\hat}{\widehat}

% punctuation at the end of a displayed formula
\newcommand{\mper}{\,.}
\newcommand{\mcom}{\,,}


% cally fonts
\newcommand{\cA}{{\cal A}}
\newcommand{\cB}{{\cal B}}
\newcommand{\cC}{{\cal C}}
\newcommand{\cD}{{\cal D}}
\newcommand{\cE}{{\cal E}}
\newcommand{\cF}{{\cal F}}
\newcommand{\cG}{{\cal G}}
\newcommand{\cH}{{\cal H}}
\newcommand{\cI}{{\cal I}}
\newcommand{\cJ}{{\cal J}}
\newcommand{\cK}{{\cal K}}
\newcommand{\cL}{{\cal L}}
\newcommand{\cM}{{\cal M}}
\newcommand{\cN}{{\cal N}}
\newcommand{\cO}{{\cal O}}
\newcommand{\cP}{{\cal P}}
\newcommand{\cQ}{{\cal Q}}
\newcommand{\cR}{{\cal R}}
\newcommand{\cS}{{\cal S}}
\newcommand{\cT}{{\cal T}}
\newcommand{\cU}{{\cal U}}
\newcommand{\cV}{{\cal V}}
\newcommand{\cW}{{\cal W}}
\newcommand{\cX}{{\cal X}}
\newcommand{\cY}{{\cal Y}}
\newcommand{\cZ}{{\cal Z}}


\newcommand{\dom}{\mathrm{dom}}
\newcommand{\Epi}{\mathrm{Epi}}
\newcommand{\Int}{\mathrm{Int} }
\newcommand{\Bd}{\mathrm{Bd}}
\newcommand{\Conv}{\mathrm{Conv}}
\newcommand{\Clos}{\mathrm{Clos}}
\newcommand{\unifsim}{\overset{\mathrm{unif}}{\sim}}
\newcommand{\spheren}{\cS^{n-1}}

% binary relations
\newcommand{\defeq}{\stackrel{\small \mathrm{def}}{=}}
\renewcommand{\leq}{\leqslant}
\renewcommand{\le}{\leqslant}
\renewcommand{\geq}{\geqslant}
\renewcommand{\ge}{\geqslant}
% parentheses
\newcommand{\paren}[1]{(#1 )}
\newcommand{\Paren}[1]{\left(#1 \right )}
% brackets
\newcommand{\brac}[1]{[#1 ]}
\newcommand{\Brac}[1]{\left[#1 \right]}
% set braces
\newcommand{\set}[1]{\{#1\}}
\newcommand{\bigset}[1]{\bigl\{#1\bigr\}}
\newcommand{\Set}[1]{\left\{#1\right\}}
% absolute value sign
\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\Abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\Bigabs}[1]{\Bigl\lvert#1\Bigr\rvert}
\newcommand{\card}[1]{\lvert#1\rvert}
\newcommand{\Card}[1]{\left\lvert#1\right\rvert}
% norm
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\Norm}[1]{\left\lVert#1\right\rVert}
% declare function f as $f \from X \to Y$
\newcommand{\from}{\colon}
% differential as in "\int x\rd x"
\newcommand\rd{\,\mathrm{d}}
% sets
\newcommand{\bits}{\{0,1\}}
\newcommand{\signs}{\{-1,1\}}
\renewcommand{\Re}{\mathbb{R}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb Z}
\newcommand{\C}{\mathbb C}
\newcommand{\N}{\mathbb N}
\newcommand{\varR}{\Re}
\newcommand{\Rnn}{\R_+}
\newcommand{\varRnn}{\varR_+}
% qed symbol
\renewcommand{\qedsymbol}{{$\blacksquare$}}
% bold vector notation
\usepackage{bm}
\renewcommand{\vec}[1]{{\bm{#1}}}

% linear algebra
\DeclareMathOperator*{\range}{range}
\newcommand{\Mid}{\ensuremath{~\Big|~}}
\newcommand{\tr}{\mathrm{tr}}
\newcommand{\trans}{\top}
\newcommand{\pinv}{\dagger}
\newcommand{\iprod}[1]{\langle #1\rangle}
\newcommand{\isqur}[1]{\langle #1,#1\rangle}
\newcommand{\trsp}[1]{#1^\trans}
\newcommand{\smallrmtrsp}[1]{#1^{\scriptscriptstyle \mathrm{T}}}
\newcommand{\oprod}[2]{\trsp{#1} #2}
\newcommand{\osqur}[1]{\oprod{#1}{#1}}
% transposed of a vector
\newcommand{\trspvec}[1]{{\trsp{\vec{#1}}}}
% norm
\newcommand{\snorm}[1]{\norm{#1}^2}
% L2 norm
\newcommand{\normt}[1]{\norm{#1}_{\scriptstyle 2}}
\newcommand{\varnormt}[1]{\norm{#1}_{\scriptscriptstyle 2}}
\newcommand{\snormt}[1]{\normt{#1}^2}
% L1 norm
\newcommand{\normo}[1]{\norm{#1}_{\scriptstyle 1}}
\newcommand{\Normo}[1]{\Norm{#1}_{\scriptstyle 1}}
\newcommand{\varnormo}[1]{\norm{#1}_{\scriptscriptstyle 1}}
% Linfty norm
\newcommand{\normi}[1]{\norm{#1}_{\scriptstyle \infty}}
\newcommand{\varnormi}[1]{\norm{#1}_{\scriptscriptstyle \infty}}

% super set with parentheses
\newcommand{\super}[2]{#1^{\paren{#2}}}
\newcommand{\varsuper}[2]{#1^{\scriptscriptstyle\paren{#2}}}

% Indictator function
\newcommand{\Ind}{\mathbb I}

% common abbrevs
\newcommand{\ignore}[1]{}
\newcommand{\OPT}{\mathrm{OPT}}
\newcommand{\opt}{\mathrm{opt}}
\newcommand{\KL}{\mathrm{KL}}
\newcommand{\TV}{\mathrm{TV}}
\newcommand{\sign}{\mathit{sign}}
\newcommand{\polylog}{{\rm polylog}}
\newcommand{\poly}{{\rm poly}}
\newcommand{\vol}{\mathrm{vol}}
\newcommand{\supp}{\mathrm{supp}}
\newcommand{\nuc}{\mathrm{nuc}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\Diag}{\mathrm{Diag}}
\newcommand{\Prox}{\mathsf{P}}

% distributions
\newcommand{\Laplace}{\mathrm{Lap}}
\newcommand{\Lap}{\Laplace}
\newcommand{\Exp}{\mathrm{Exp}}
\newcommand{\Bin}{\mathrm{Bin}}
\newcommand{\Ber}{\mathrm{Ber}}
\newcommand{\Hell}{\mathrm{H}}

\newcommand{\sidenote}[1]{#1}
\newcommand{\marginnote}[1]{#1}
\newcommand{\remove}[1]{}

\newcommand{\domain}{\Omega}
\newcommand{\epi}{\mathrm{epi}}

\newcommand{\latexcommand}[1]{{\tt\textbackslash #1}}
\newcommand{\algorithmfootnote}[2][\footnotesize]{%
  \let\old@algocf@finish\@algocf@finish% Store algorithm finish macro
  \def\@algocf@finish{\old@algocf@finish% Update finish macro to insert "footnote"
    \leavevmode\rlap{\begin{minipage}{\linewidth}
    #1#2
    \end{minipage}}%
  }%
}